# HEPHAITOS E2E 테스트 케이스 종합 분석

> **작성일**: 2025-12-21
> **목적**: UX/UI 흐름 및 기능 로직의 모든 경우의 수 계산
> **방법론**: User Journey Mapping + State Machine Analysis

---

## 1. 사용자 역할(Personas)

### 1.1 정의된 Personas

| 역할 | 설명 | 권한 | 주요 여정 |
|------|------|------|----------|
| **비회원** | 미인증 사용자 | 랜딩/데모 접근만 | 회원가입 → 온보딩 |
| **신규 회원** | 가입 후 온보딩 미완료 | 온보딩 페이지만 | 온보딩 완료 → 대시보드 |
| **Free 회원** | 온보딩 완료, 무료 플랜 | 제한된 기능 | Copy → Learn → Build |
| **Starter 회원** | 유료 Starter 플랜 | 전체 교육, 백테스트 100회/월 | Learn → Build |
| **Pro 회원** | Pro 플랜 | FORGE 무제한, 실시간 데이터 | Build (고급) |
| **Admin** | 관리자 | 모든 기능 + 관리자 대시보드 | 모니터링, CS |

**총 Personas**: 6개

---

## 2. 핵심 사용자 여정(User Journeys)

### 2.1 온보딩 여정 (신규 회원)

```
[랜딩 페이지]
    ↓ (회원가입 클릭)
[회원가입 페이지]
    ↓ (Google/Kakao OAuth 또는 이메일)
[온보딩 Step 1] - 닉네임 입력
    ↓
[온보딩 Step 2] - 투자 성향 선택
    ↓
[온보딩 Step 3] - 경험 수준 선택
    ↓
[온보딩 Step 4] - 관심 분야 선택
    ↓
[온보딩 Step 5] - Pain Points 선택
    ↓
[온보딩 Step 6] - 요약 및 확인
    ↓
[대시보드] - 온보딩 완료
```

**경우의 수**:
- 회원가입 방법: 3가지 (Google, Kakao, Email)
- 투자 성향: 3가지 (conservative, moderate, aggressive)
- 경험 수준: 3가지 (beginner, intermediate, advanced)
- 관심 분야: 조합 가능 (주식, 암호화폐, ETF 등) → 2^n
- Pain Points: 조합 가능 → 2^n
- 중간 저장: 각 단계에서 가능
- 뒤로 가기: 각 단계에서 가능

**핵심 테스트 케이스**:
- Happy Path: 3개 (각 인증 방법)
- 중간 저장 & 복원: 6개 (각 단계)
- Validation 오류: 10개
- 뒤로 가기 & 앞으로 가기: 5개

**총 온보딩 테스트**: ~24개

### 2.2 COPY 여정 (셀럽 따라하기)

```
[대시보드]
    ↓
[미러링 페이지] (/dashboard/mirroring)
    ↓ (셀럽 선택: Nancy Pelosi, Warren Buffett 등)
[셀럽 포트폴리오 상세]
    ↓ (1클릭 미러링 버튼)
[증권사 연동 확인]
    ↓ (연동 완료 or 연동 필요)
[미러링 설정]
    - 복사 비율 설정 (10%, 50%, 100%)
    - 자동 리밸런싱 설정
    - 알림 설정
    ↓ (확인)
[미러링 활성화]
    ↓
[포트폴리오 페이지] - 미러링 종목 표시
    ↓ (실시간 동기화)
[알림] - 셀럽 거래 시 알림
```

**경우의 수**:
- 셀럽 수: 10+명
- 증권사 연동 상태: 2가지 (연동됨, 미연동)
- 복사 비율: 무한 (입력값)
- 자동 리밸런싱: 2가지 (ON/OFF)
- 알림 설정: 3가지 (매수만, 매도만, 모두)

**핵심 테스트 케이스**:
- Happy Path (연동 완료): 3개
- 증권사 미연동 → 연동 플로우: 2개
- 비율 변경: 3개
- 미러링 일시정지/재개: 2개
- 미러링 중단: 1개
- 실시간 알림 수신: 3개

**총 COPY 테스트**: ~14개

### 2.3 LEARN 여정 (AI + 멘토 코칭)

```
[대시보드]
    ↓
[코칭 페이지] (/dashboard/coaching)
    ↓ (AI 분석 or 멘토 매칭)

[AI 분석 경로]
    ↓ (셀럽 거래 선택)
    [AI 분석 리포트]
        - 왜 이 종목을 샀는지
        - 시장 상황 분석
        - 학습 포인트
    ↓ (퀴즈)
    [이해도 테스트]
    ↓ (통과)
    [다음 학습 추천]

[멘토 코칭 경로]
    ↓ (멘토 선택)
    [1:1 코칭 예약]
    ↓
    [WebSocket 화면 공유]
    ↓ (코칭 세션)
    [세션 녹화 & 피드백]
```

**경우의 수**:
- AI 분석 대상: 셀럽 거래 수 (무한)
- 퀴즈 결과: 2가지 (통과, 재시도)
- 멘토 수: 10+명
- 코칭 시간대: 여러 슬롯
- 코칭 유형: 3가지 (라이브, 타점 분석, 전략 리뷰)

**핵심 테스트 케이스**:
- AI 분석 조회: 3개
- 퀴즈 통과: 2개
- 퀴즈 실패 → 재시도: 1개
- 멘토 예약: 2개
- 예약 취소: 1개
- WebSocket 연결: 1개

**총 LEARN 테스트**: ~10개

### 2.4 BUILD 여정 (전략 빌더)

```
[대시보드]
    ↓
[전략 목록] (/dashboard/strategies)
    ↓ (새 전략 생성)

[전략 생성 방법 선택]
    ├─ [자연어 AI 생성]
    │   ↓ (프롬프트 입력: "RSI 30 이하에서 매수")
    │   [AI가 Python 코드 생성]
    │   ↓
    │   [코드 리뷰 & 수정]
    │
    ├─ [비주얼 빌더]
    │   ↓ (노드 드래그 앤 드롭)
    │   [TriggerNode] → [ConditionNode] → [ActionNode]
    │   ↓
    │   [설정 패널에서 파라미터 조정]
    │
    └─ [템플릿에서 복사]
        ↓ (마켓플레이스에서 선택)
        [기존 전략 복사 → 수정]

    ↓ (전략 완성)
[백테스트 실행]
    ↓ (기간 선택: 1년, 3년, 5년)
    [시뮬레이션 실행]
    ↓
[백테스트 결과]
    - 수익률: +15.7%
    - Sharpe Ratio: 1.85
    - MDD: -8.2%
    ↓ (만족)
[전략 저장]
    ↓ (실전 배포 or 페이퍼 트레이딩)

[실전 배포]
    ↓ (증권사 연동 확인)
    [리스크 설정]
        - 최대 손실 제한
        - 포지션 크기
        - 손절매 설정
    ↓ (확인)
[전략 실행 중]
    ↓
[대시보드에서 실시간 모니터링]
```

**경우의 수**:
- 전략 생성 방법: 3가지
- AI 프롬프트: 무한
- 노드 조합: 무한 (5가지 노드 타입)
- 템플릿 수: 50+개
- 백테스트 기간: 5가지 (1M, 3M, 1Y, 3Y, 5Y)
- 백테스트 심볼: 무한
- 리스크 설정 조합: 무한

**핵심 테스트 케이스**:
- AI 전략 생성 (Happy Path): 3개
- AI 전략 생성 (에러 처리): 2개
- 비주얼 빌더 (5개 노드 조합): 5개
- 비주얼 빌더 (노드 삭제/수정): 3개
- 템플릿 복사: 2개
- 백테스트 실행: 5개 (각 기간)
- 백테스트 실패 케이스: 3개
- 전략 저장: 2개
- 전략 실전 배포: 2개
- 전략 일시정지/재개: 2개
- 전략 중단: 1개

**총 BUILD 테스트**: ~30개

### 2.5 결제 여정

```
[설정 페이지]
    ↓
[플랜 선택] (/dashboard/settings/billing)
    ├─ Free (현재)
    ├─ Starter (₩9,900/월)
    ├─ Pro (₩29,900/월)
    └─ Team (₩199,000/월)
    ↓ (Starter 선택)
[결제 정보 입력]
    ↓ (카드 정보)
[Tosspayments 결제 페이지]
    ↓ (승인)
[결제 완료]
    ↓
[플랜 업그레이드 완료]
    ↓
[기능 잠금 해제]
```

**경우의 수**:
- 플랜: 4가지
- 결제 방법: 3가지 (카드, 계좌이체, 간편결제)
- 결제 결과: 3가지 (성공, 실패, 취소)

**핵심 테스트 케이스**:
- 플랜 업그레이드: 4개
- 플랜 다운그레이드: 2개
- 결제 성공: 3개
- 결제 실패 처리: 2개
- 결제 취소: 1개
- 환불 요청: 1개

**총 결제 테스트**: ~13개

### 2.6 관리자 여정

```
[Admin 대시보드] (/admin/monitoring)
    ├─ [사용자 모니터링]
    ├─ [거래 모니터링]
    ├─ [비용 분석] (/admin/costs)
    ├─ [안전성 대시보드] (/admin/safety)
    ├─ [CS 대시보드] (/admin/cs)
    └─ [Analytics]
        ├─ [ARPPU] (/admin/analytics/arppu)
        ├─ [Funnel] (/admin/analytics/funnel)
        └─ [Retention] (/admin/analytics/retention)
```

**핵심 테스트 케이스**:
- Admin 로그인: 1개
- 각 대시보드 로드: 7개
- 데이터 필터링: 5개
- Export 기능: 3개

**총 Admin 테스트**: ~16개

---

## 3. 페이지별 인터랙션 분석

### 3.1 랜딩 페이지 (/)

**주요 인터랙션**:
1. Hero Section
   - CTA 버튼 (회원가입, 데모 보기)
   - 스크롤 애니메이션
2. Features Section
   - Copy/Learn/Build 탭 전환
3. Pricing Section
   - 플랜 비교
   - FAQ 아코디언
4. Footer
   - 링크 네비게이션

**테스트 케이스**:
- [ ] 페이지 로드 성능 (<2초)
- [ ] CTA 버튼 클릭 → 회원가입 페이지
- [ ] 데모 보기 → 데모 페이지
- [ ] 탭 전환 (Copy/Learn/Build)
- [ ] FAQ 아코디언 열기/닫기
- [ ] 반응형 (Mobile/Tablet/Desktop)

**총**: 6개

### 3.2 회원가입 페이지 (/signup, /auth/signup)

**주요 인터랙션**:
1. Google OAuth
2. Kakao OAuth
3. Email 회원가입
   - 이메일 입력
   - 비밀번호 입력 (유효성 검증)
   - 비밀번호 확인
   - 약관 동의

**테스트 케이스**:
- [ ] Google 회원가입 성공
- [ ] Kakao 회원가입 성공
- [ ] Email 회원가입 성공
- [ ] 이메일 중복 에러
- [ ] 비밀번호 불일치 에러
- [ ] 약관 미동의 에러
- [ ] 유효하지 않은 이메일 형식
- [ ] 약한 비밀번호 에러

**총**: 8개

### 3.3 로그인 페이지 (/login, /auth/login)

**주요 인터랙션**:
1. Google OAuth
2. Kakao OAuth
3. Email 로그인
4. 비밀번호 찾기

**테스트 케이스**:
- [ ] Google 로그인 성공
- [ ] Kakao 로그인 성공
- [ ] Email 로그인 성공
- [ ] 잘못된 비밀번호 에러
- [ ] 존재하지 않는 계정 에러
- [ ] 비밀번호 재설정 플로우

**총**: 6개

### 3.4 온보딩 페이지 (/onboarding)

**주요 인터랙션**:
- 6단계 진행
- 각 단계에서 입력 & 검증
- 뒤로/앞으로 네비게이션
- 중간 저장
- Skip 옵션

**테스트 케이스**:
- [ ] 전체 플로우 완료 (Happy Path)
- [ ] 각 단계 validation 오류 (6개)
- [ ] 뒤로 가기 → 데이터 유지
- [ ] 중간에 나갔다가 복귀 → 진행 상태 복원
- [ ] Skip 버튼 동작

**총**: 10개

### 3.5 대시보드 메인 (/dashboard)

**주요 인터랙션**:
1. Overview Cards
   - 총 자산
   - 오늘 수익률
   - 실행 중인 전략 수
2. Quick Actions
   - 새 전략 생성
   - 포트폴리오 보기
   - 미러링 시작
3. Recent Activities
4. Performance Chart

**테스트 케이스**:
- [ ] 페이지 로드 및 데이터 표시
- [ ] Quick Action 버튼 클릭 (3개)
- [ ] Chart 인터랙션 (Zoom, Pan)
- [ ] 실시간 데이터 업데이트

**총**: 6개

### 3.6 전략 목록 (/dashboard/strategies)

**주요 인터랙션**:
1. 전략 카드 리스트
2. 필터링
   - 상태별 (draft, running, paused, stopped)
   - 정렬 (최신순, 수익률순)
3. 검색
4. 페이지네이션
5. 새 전략 생성 버튼

**테스트 케이스**:
- [ ] 전략 목록 로드
- [ ] 상태별 필터링 (4개)
- [ ] 정렬 변경 (2개)
- [ ] 검색 기능
- [ ] 페이지네이션 (다음/이전)
- [ ] 전략 카드 클릭 → 상세 페이지
- [ ] 새 전략 생성 버튼

**총**: 11개

### 3.7 전략 빌더 (/dashboard/strategy-builder)

**주요 인터랙션**:
1. Canvas (ReactFlow)
   - 노드 드래그 앤 드롭
   - 노드 연결
   - 노드 삭제
2. Node Palette
   - TriggerNode
   - ConditionNode
   - IndicatorNode
   - ActionNode
   - RiskNode
3. Config Panel
   - 선택된 노드 설정
4. Toolbar
   - Undo/Redo
   - 저장
   - 백테스트 실행
   - 실행/중지

**테스트 케이스**:
- [ ] 빈 캔버스 시작
- [ ] 각 노드 타입 추가 (5개)
- [ ] 노드 연결 (유효한 연결)
- [ ] 노드 연결 (유효하지 않은 연결 - 에러)
- [ ] 노드 설정 변경 (5개)
- [ ] 노드 삭제
- [ ] Undo/Redo (2개)
- [ ] 저장 (Server Action 호출)
- [ ] 백테스트 실행
- [ ] 유효하지 않은 전략 에러

**총**: 20개

### 3.8 AI 전략 생성 (/dashboard/ai-strategy)

**주요 인터랙션**:
1. 자연어 프롬프트 입력
2. AI 생성 (Loading)
3. 생성된 코드 표시 (Monaco Editor)
4. 코드 수정
5. 백테스트 실행
6. 저장

**테스트 케이스**:
- [ ] 간단한 프롬프트 → 전략 생성
- [ ] 복잡한 프롬프트 → 전략 생성
- [ ] 유효하지 않은 프롬프트 에러
- [ ] AI API 에러 처리
- [ ] 생성된 코드 수정
- [ ] 백테스트 실행
- [ ] 저장

**총**: 7개

### 3.9 백테스트 페이지 (/dashboard/backtest)

**주요 인터랙션**:
1. 전략 선택
2. 백테스트 설정
   - 기간 선택
   - 심볼 선택
   - 초기 자본
3. 실행 버튼
4. 결과 표시
   - Performance Metrics
   - Equity Curve Chart
   - Trade List

**테스트 케이스**:
- [ ] 백테스트 성공 (1년)
- [ ] 백테스트 성공 (3년)
- [ ] 백테스트 성공 (5년)
- [ ] 백테스트 실패 (유효하지 않은 기간)
- [ ] 백테스트 실패 (데이터 없음)
- [ ] 결과 차트 인터랙션
- [ ] 거래 내역 확인

**총**: 7개

### 3.10 포트폴리오 페이지 (/dashboard/portfolio)

**주요 인터랙션**:
1. 보유 종목 리스트
2. 차트 (파이 차트, 라인 차트)
3. 성과 지표
4. 거래 내역

**테스트 케이스**:
- [ ] 포트폴리오 로드
- [ ] 차트 전환 (파이/라인)
- [ ] 종목 클릭 → 상세
- [ ] 거래 내역 필터링

**총**: 4개

### 3.11 미러링 페이지 (/dashboard/mirroring, /dashboard/copy-trading)

**주요 인터랙션**:
1. 셀럽 리스트
2. 셀럽 선택 → 포트폴리오 상세
3. 미러링 시작 버튼
4. 설정 모달
   - 복사 비율
   - 자동 리밸런싱
   - 알림 설정
5. 미러링 활성화

**테스트 케이스**:
- [ ] 셀럽 리스트 로드
- [ ] 셀럽 선택 → 포트폴리오 조회
- [ ] 미러링 시작 (증권사 연동 완료)
- [ ] 미러링 시작 (증권사 미연동 → 연동 플로우)
- [ ] 설정 변경 (비율, 리밸런싱, 알림)
- [ ] 미러링 일시정지
- [ ] 미러링 재개
- [ ] 미러링 중단

**총**: 8개

### 3.12 코칭 페이지 (/dashboard/coaching)

**주요 인터랙션**:
1. AI 분석 탭
   - 셀럽 거래 선택
   - AI 리포트 조회
   - 퀴즈 풀기
2. 멘토 코칭 탭
   - 멘토 리스트
   - 예약하기
   - 세션 참여 (WebSocket)

**테스트 케이스**:
- [ ] AI 분석 조회
- [ ] 퀴즈 풀기 (정답)
- [ ] 퀴즈 풀기 (오답 → 재시도)
- [ ] 멘토 리스트 조회
- [ ] 멘토 예약
- [ ] 예약 취소
- [ ] WebSocket 연결 (모의)

**총**: 7개

### 3.13 설정 페이지 (/dashboard/settings)

**주요 인터랙션**:
1. 프로필 설정
   - 닉네임 변경
   - 투자 성향 변경
2. 알림 설정
3. 증권사 연동
4. 로그아웃

**테스트 케이스**:
- [ ] 프로필 수정
- [ ] 알림 설정 변경
- [ ] 증권사 연동
- [ ] 로그아웃

**총**: 4개

### 3.14 결제 페이지 (/dashboard/settings/billing)

**주요 인터랙션**:
1. 현재 플랜 표시
2. 플랜 선택
3. 결제 정보 입력
4. 결제 실행
5. 결제 완료

**테스트 케이스**:
- [ ] 플랜 업그레이드 (Free → Starter)
- [ ] 플랜 업그레이드 (Starter → Pro)
- [ ] 결제 성공
- [ ] 결제 실패
- [ ] 결제 취소
- [ ] 플랜 다운그레이드
- [ ] 환불 요청

**총**: 7개

---

## 4. 상태별 경우의 수

### 4.1 인증 상태

| 상태 | 조건 | 접근 가능 페이지 |
|------|------|-----------------|
| **비인증** | 로그인 안 함 | /, /login, /signup, /demo |
| **인증 + 온보딩 미완료** | 로그인했으나 onboarding_completed=false | /onboarding만 |
| **인증 + 온보딩 완료** | onboarding_completed=true | /dashboard/* (전체) |
| **Admin** | role=admin | /dashboard/* + /admin/* |

**테스트 케이스**:
- [ ] 비인증 → 보호된 페이지 접근 → /login 리다이렉트
- [ ] 온보딩 미완료 → /dashboard 접근 → /onboarding 리다이렉트
- [ ] 온보딩 완료 → /onboarding 접근 → /dashboard 리다이렉트
- [ ] Admin → /admin/* 접근 성공
- [ ] Non-admin → /admin/* 접근 → 403 에러

**총**: 5개

### 4.2 플랜별 기능 제한

| 기능 | Free | Starter | Pro | Team |
|------|------|---------|-----|------|
| 백테스트 | 10회/월 | 100회/월 | 무제한 | 무제한 |
| 전략 수 | 3개 | 10개 | 무제한 | 무제한 |
| 실시간 데이터 | ❌ | ❌ | ✅ | ✅ |
| 미러링 | 1명 | 3명 | 무제한 | 무제한 |
| AI 전략 생성 | 5회/월 | 20회/월 | 100회/월 | 무제한 |

**테스트 케이스**:
- [ ] Free - 백테스트 10회 초과 → 업그레이드 모달
- [ ] Free - 전략 4개 생성 시도 → 제한 모달
- [ ] Starter - 실시간 데이터 접근 → 제한 모달
- [ ] Pro - 모든 기능 접근 성공

**총**: 4개

### 4.3 전략 상태 머신

```
draft → backtesting → ready → running → paused
                                  ↓
                              stopped
```

**상태 전이 케이스**:
- draft → backtesting (백테스트 시작)
- backtesting → draft (백테스트 취소)
- backtesting → ready (백테스트 성공)
- ready → running (실전 배포)
- running → paused (일시정지)
- paused → running (재개)
- running → stopped (중단)
- ready → draft (수정)

**테스트 케이스**:
- [ ] 각 상태 전이 (8개)
- [ ] 유효하지 않은 전이 에러 (5개)

**총**: 13개

### 4.4 네트워크 상태

| 상태 | 테스트 케이스 |
|------|-------------|
| **정상** | 모든 API 호출 성공 |
| **느린 연결** | Loading 상태 표시, Timeout |
| **오프라인** | 오프라인 UI 표시, 재시도 |
| **API 에러** | 에러 메시지 표시, Fallback |

**테스트 케이스**:
- [ ] 정상 네트워크
- [ ] 느린 연결 (3G 시뮬레이션)
- [ ] 오프라인 → 온라인 복구
- [ ] API 500 에러 처리
- [ ] API 429 (Rate Limit) 처리

**총**: 5개

---

## 5. 크로스 브라우저 & 디바이스

### 5.1 브라우저

| 브라우저 | 버전 | 우선순위 |
|---------|------|----------|
| Chrome | 최신 | P0 |
| Safari | 최신 | P1 |
| Firefox | 최신 | P1 |
| Edge | 최신 | P2 |

### 5.2 디바이스

| 디바이스 | 뷰포트 | 우선순위 |
|---------|--------|----------|
| Desktop | 1920x1080 | P0 |
| Laptop | 1366x768 | P0 |
| Tablet | 768x1024 | P1 |
| Mobile | 375x667 | P0 |

**테스트 케이스**:
- [ ] Chrome Desktop (모든 핵심 플로우)
- [ ] Safari Desktop (핵심 플로우)
- [ ] Mobile Chrome (핵심 플로우)
- [ ] Mobile Safari (핵심 플로우)

**총**: 4 브라우저 × 핵심 플로우 = ~40개

---

## 6. 성능 테스트

### 6.1 페이지 로드 성능

| 페이지 | 목표 (LCP) | 목표 (TTI) |
|--------|-----------|-----------|
| 랜딩 페이지 | <2초 | <3초 |
| 대시보드 | <2.5초 | <4초 |
| 전략 빌더 | <3초 | <5초 |

**테스트 케이스**:
- [ ] 각 페이지 Lighthouse 스코어 >90

**총**: 10개 (주요 페이지)

### 6.2 인터랙션 성능

| 인터랙션 | 목표 |
|---------|------|
| 버튼 클릭 → 응답 | <100ms |
| API 호출 → 응답 | <500ms |
| 차트 렌더링 | <1초 |

**테스트 케이스**:
- [ ] 버튼 클릭 응답성 (10개 주요 버튼)
- [ ] API 호출 속도 (10개 주요 API)

**총**: 20개

---

## 7. 접근성 (a11y)

### 7.1 WCAG 2.1 AA 준수

**테스트 케이스**:
- [ ] 키보드 네비게이션 (Tab, Enter, Esc)
- [ ] Screen Reader 호환 (ARIA labels)
- [ ] 색상 대비 >4.5:1
- [ ] Focus 표시 명확
- [ ] Form labels 존재

**총**: 5개 × 주요 페이지 = 50개

---

## 8. 보안 테스트

### 8.1 인증 & 인가

**테스트 케이스**:
- [ ] 비인증 사용자 → 보호된 API 호출 → 401
- [ ] 타인의 데이터 접근 시도 → 403
- [ ] JWT 만료 → 자동 로그아웃
- [ ] CSRF 토큰 검증

**총**: 4개

### 8.2 입력 검증

**테스트 케이스**:
- [ ] XSS 공격 방어 (script 태그 입력)
- [ ] SQL Injection 방어
- [ ] Path Traversal 방어

**총**: 3개

---

## 9. 총 경우의 수 계산

### 9.1 사용자 여정별

| 여정 | 테스트 케이스 수 |
|------|----------------|
| 온보딩 | 24 |
| COPY (미러링) | 14 |
| LEARN (코칭) | 10 |
| BUILD (전략 빌더) | 30 |
| 결제 | 13 |
| Admin | 16 |
| **소계** | **107** |

### 9.2 페이지별

| 페이지 | 테스트 케이스 수 |
|--------|----------------|
| 랜딩 | 6 |
| 회원가입 | 8 |
| 로그인 | 6 |
| 온보딩 | 10 |
| 대시보드 메인 | 6 |
| 전략 목록 | 11 |
| 전략 빌더 | 20 |
| AI 전략 생성 | 7 |
| 백테스트 | 7 |
| 포트폴리오 | 4 |
| 미러링 | 8 |
| 코칭 | 7 |
| 설정 | 4 |
| 결제 | 7 |
| **소계** | **111** |

### 9.3 상태별

| 상태 카테고리 | 테스트 케이스 수 |
|-------------|----------------|
| 인증 상태 | 5 |
| 플랜별 제한 | 4 |
| 전략 상태 머신 | 13 |
| 네트워크 상태 | 5 |
| **소계** | **27** |

### 9.4 기타

| 카테고리 | 테스트 케이스 수 |
|---------|----------------|
| 크로스 브라우저 | 40 |
| 성능 | 30 |
| 접근성 | 50 |
| 보안 | 7 |
| **소계** | **127** |

---

## 10. 총합 및 우선순위

### 10.1 전체 경우의 수

```
사용자 여정: 107
페이지별: 111
상태별: 27
기타: 127
─────────────
총계: 372개
```

### 10.2 우선순위별 분류

#### P0 (Critical - MVP 필수)

**핵심 사용자 여정** (50개):
- [ ] 회원가입 → 로그인 (3개)
- [ ] 온보딩 전체 플로우 (1개)
- [ ] 전략 생성 (AI) (3개)
- [ ] 전략 생성 (비주얼) (5개)
- [ ] 백테스트 실행 (3개)
- [ ] 전략 저장 (1개)
- [ ] 미러링 시작 (2개)
- [ ] 결제 (플랜 업그레이드) (2개)
- [ ] 로그아웃 (1개)

**인증 & 인가** (5개):
- [ ] 비인증 → 리다이렉트
- [ ] 온보딩 미완료 → 리다이렉트
- [ ] 권한 없는 페이지 접근 차단

**성능** (10개):
- [ ] 주요 페이지 LCP <3초

**총 P0**: **65개**

#### P1 (Important - 베타 출시 전 필수)

**확장 사용자 여정** (40개):
- [ ] AI 분석 & 코칭
- [ ] 포트폴리오 관리
- [ ] 전략 수정/삭제
- [ ] 설정 변경

**에러 처리** (20개):
- [ ] 각 API 호출 실패 케이스

**반응형** (15개):
- [ ] Mobile/Tablet 핵심 플로우

**총 P1**: **75개**

#### P2 (Nice to have - 정식 출시 전)

**Admin** (16개):
- [ ] 관리자 대시보드 전체

**접근성** (50개):
- [ ] WCAG 2.1 AA 준수

**크로스 브라우저** (30개):
- [ ] Safari, Firefox, Edge 테스트

**총 P2**: **96개**

#### P3 (Enhancement - 출시 후 개선)

**고급 기능** (30개):
- [ ] 멘토 코칭 WebSocket
- [ ] 실시간 알림
- [ ] 전략 마켓플레이스

**성능 최적화** (20개):
- [ ] 인터랙션 응답성 <100ms

**보안 심화** (7개):
- [ ] XSS, SQL Injection 등

**총 P3**: **57개**

---

## 11. E2E 테스트 전략

### 11.1 도구 선택

**Playwright** (선택 이유):
- ✅ 빠른 실행 속도
- ✅ 병렬 실행 지원
- ✅ 크로스 브라우저
- ✅ TypeScript 네이티브
- ✅ Auto-wait (더 안정적)

### 11.2 테스트 구조

```
e2e/
├── fixtures/
│   ├── auth.ts          # 인증 fixture
│   ├── users.ts         # 테스트 사용자
│   └── data.ts          # 테스트 데이터
├── pages/
│   ├── landing.page.ts  # Page Object Model
│   ├── login.page.ts
│   ├── dashboard.page.ts
│   └── strategy-builder.page.ts
├── tests/
│   ├── p0/              # P0 테스트
│   │   ├── auth.spec.ts
│   │   ├── onboarding.spec.ts
│   │   ├── strategy-creation.spec.ts
│   │   └── backtest.spec.ts
│   ├── p1/              # P1 테스트
│   └── p2/              # P2 테스트
└── utils/
    ├── helpers.ts       # 공통 헬퍼
    └── assertions.ts    # 커스텀 assertion
```

### 11.3 실행 계획

#### Phase 1: P0 테스트 (65개)
**목표**: MVP 런칭 전 완료
**기간**: 1주일
- Day 1-2: 인증 & 온보딩 (20개)
- Day 3-4: 전략 생성 & 백테스트 (25개)
- Day 5-6: 미러링 & 결제 (15개)
- Day 7: 성능 테스트 (5개)

#### Phase 2: P1 테스트 (75개)
**목표**: 베타 출시 전 완료
**기간**: 1주일
- Day 1-3: 확장 기능 (40개)
- Day 4-5: 에러 처리 (20개)
- Day 6-7: 반응형 (15개)

#### Phase 3: P2 테스트 (96개)
**목표**: 정식 출시 전 완료
**기간**: 1주일
- Day 1-2: Admin (16개)
- Day 3-5: 접근성 (50개)
- Day 6-7: 크로스 브라우저 (30개)

---

## 12. CI/CD 통합

### 12.1 자동화 전략

```yaml
# .github/workflows/e2e.yml
name: E2E Tests

on:
  pull_request:
    branches: [main]
  push:
    branches: [main]

jobs:
  e2e-p0:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: pnpm install
      - run: pnpm playwright install
      - run: pnpm test:e2e:p0  # P0만 실행 (빠름)

  e2e-full:
    runs-on: ubuntu-latest
    if: github.event_name == 'push'
    steps:
      - run: pnpm test:e2e  # 전체 실행 (main 푸시 시에만)
```

### 12.2 병렬 실행

- P0: 4개 worker (병렬)
- P1: 6개 worker
- P2: 8개 worker

**예상 실행 시간**:
- P0: ~15분
- P1: ~20분
- P2: ~30분
- 전체: ~65분

---

## 13. 모니터링 & 리포팅

### 13.1 테스트 리포트

- HTML 리포트 (Playwright 기본)
- JUnit XML (CI 통합)
- Slack 알림 (실패 시)

### 13.2 커버리지 목표

| Phase | 목표 커버리지 |
|-------|-------------|
| P0 완료 후 | 70% |
| P1 완료 후 | 85% |
| P2 완료 후 | 95% |

---

## 14. 다음 단계

1. **Playwright 설정** (30분)
   - 설치 및 config 작성
   - 첫 테스트 작성 (smoke test)

2. **Page Object Model 구축** (2시간)
   - 주요 페이지 클래스 작성
   - 공통 fixture 작성

3. **P0 테스트 구현** (1주일)
   - 65개 핵심 테스트 작성
   - CI 통합

4. **P1 테스트 구현** (1주일)
   - 75개 확장 테스트 작성

---

**총 경우의 수**: **372개**
**MVP 필수 (P0)**: **65개**
**베타 출시 필수 (P0+P1)**: **140개**

**작성자**: Claude Sonnet 4.5
**최종 수정**: 2025-12-21
