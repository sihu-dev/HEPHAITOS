name: Performance Benchmark

on:
  push:
      branches: [main, develop]
        pull_request:
            branches: [main, develop]
              workflow_dispatch:

              jobs:
                performance:
                    name: Performance Benchmark
                        runs-on: ubuntu-latest
                            timeout-minutes: 15
                                steps:
                                      - name: Checkout code
                                              uses: actions/checkout@v4

                                                    - name: Setup pnpm
                                                            uses: pnpm/action-setup@v2
                                                                    with:
                                                                              version: 8

                                                                                    - name: Setup Node.js
                                                                                            uses: actions/setup-node@v4
                                                                                                    with:
                                                                                                              node-version: '18'
                                                                                                              
                                                                                                                    - name: Install dependencies
                                                                                                                            run: pnpm install
                                                                                                                            
                                                                                                                                  - name: Build for production
                                                                                                                                          run: pnpm build
                                                                                                                                                  env:
                                                                                                                                                            NODE_ENV: production
                                                                                                                                                                      SKIP_ENV_VALIDATION: true
                                                                                                                                                                              continue-on-error: true
                                                                                                                                                                              
                                                                                                                                                                                    - name: Check bundle size
                                                                                                                                                                                            run: |
                                                                                                                                                                                                      echo "Bundle analysis complete"
                                                                                                                                                                                                                du -sh .next/static 2>/dev/null || echo "No build output"
